(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(17),o=t.n(c),a=t(3),u=t(2),r=t(0),i=function(e){return Object(r.jsx)("input",{placeholder:"filter contacts",value:e.filter,onChange:e.handleFilter})},s=function(e){var n=e.text;return Object(r.jsx)("h2",{children:n})},l=function(){return Object(r.jsxs)("div",{style:{color:"green",fontStyle:"italic",fontSize:16},children:[Object(r.jsx)("br",{}),Object(r.jsx)("em",{children:"phonebook app by Lukas Vidfar, 2021"})]})},d=function(e){var n=e.message;return null===n?null:n.includes("successfully")?Object(r.jsx)("div",{className:"success",children:n}):(n.includes("already"),Object(r.jsx)("div",{className:"error",children:n}))},f=t(4),b=t.n(f),h="/persons",m=function(){return b.a.get(h).then((function(e){return e.data}))},j=function(e){return b.a.post(h,e).then((function(e){return e.data}))},p=function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){return b.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},x=(t(40),function(e){return Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:e.addPerson,children:[Object(r.jsx)("input",{placeholder:"add name",value:e.newName,onChange:e.handleNameChange}),Object(r.jsx)("br",{}),Object(r.jsx)("input",{placeholder:"add number",value:e.newNumber,onChange:e.handleNumberChange}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{type:"submit",children:"save"})]})})}),w=function(e){var n=e.person,t=e.setPersons,c=e.setNotification,o=(e.personObject,e.persons);return Object(r.jsx)("div",{children:Object(r.jsxs)("li",{children:[" ",n.name," ",n.number,Object(r.jsx)("button",{onClick:function(e){e.preventDefault(),window.confirm("do you want to delete?")?(console.log("yes"),O("".concat(n.id)).then(t(o.filter((function(e){return e.name!==n.name})))).catch((function(e){c("".concat(n.name," was already removed from the phonebook")),setTimeout((function(){c(null)}),2e3)})),c("".concat(n.name," was successfully removed in the phonebook")),setTimeout((function(){c(null)}),2e3)):console.log("no")},children:"  delete "})]})})},g=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(u.useState)(""),f=Object(a.a)(o,2),b=f[0],h=f[1],O=Object(u.useState)(""),g=Object(a.a)(O,2),v=g[0],y=g[1],k=Object(u.useState)(""),N=Object(a.a)(k,2),C=N[0],S=N[1],T=Object(u.useState)(null),P=Object(a.a)(T,2),D=P[0],E=P[1];Object(u.useEffect)((function(){console.log("effect"),m().then((function(e){console.log("got all"),c(e)}))}),[]);var F=t.filter((function(e){return e.name.toLowerCase().includes(C)}));return Object(r.jsxs)("div",{children:[Object(r.jsx)(d,{message:D}),Object(r.jsx)(s,{text:"phonebook app"}),Object(r.jsx)(i,{filter:C,handleFilter:function(e){S(e.target.value)}}),Object(r.jsx)(s,{text:"add new"}),Object(r.jsx)(x,{addPerson:function(e){e.preventDefault();var n={name:b,number:v},o=t.map((function(e){return e.name})),a=t.map((function(e){return e.number}));if(o.includes(n.name)){if(window.alert("".concat(n.name," already in phonebook")),window.confirm("would you like to change the number for ".concat(n.name,"?"))){var u=t.find((function(e){return e.name===n.name})).id;p(u,n).then((function(e){c(t.map((function(t){return t.name!==n.name?t:e}))),E("".concat(n.name," was successfully updated in the phonebook")),setTimeout((function(){E(null)}),2e3)})).catch((function(e){E("there was an error while updating, please refresh"),setTimeout((function(){E(null)}),2e3)})),h(""),y("")}}else if(a.includes(n.number)){if(window.alert("a contact with the number ".concat(n.number," is already in phonebook")),window.confirm("would you like to change the contact for ".concat(n.number,"?"))){var r=t.find((function(e){return e.number===n.number})).id;p(r,n).then((function(e){c(t.map((function(t){return t.number!==n.number?t:e}))),E("contact belonging to ".concat(n.number," was successfully updated in the phonebook")),setTimeout((function(){E(null)}),2e3)})).catch((function(e){E("there was an error while updating, please refresh"),setTimeout((function(){E(null)}),2e3)})),h(""),y("")}}else j(n).then((function(e){c(t.concat(e)),E("".concat(n.name," was successfully added to the phonebook")),setTimeout((function(){E(null)}),2e3),h(""),y("")})).catch((function(e){console.log(e),E("error: not able to add contact"),setTimeout((function(){E(null)}),2e3)}))},newName:b,newNumber:v,handleNameChange:function(e){h(e.target.value)},handleNumberChange:function(e){y(e.target.value)}}),Object(r.jsx)(s,{text:"contacts"}),Object(r.jsx)("ul",{children:F.map((function(e){return Object(r.jsx)(w,{setPersons:c,setNotification:E,persons:t,person:e},e.id)}))}),Object(r.jsx)(l,{})]})};t(41);o.a.render(Object(r.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.ae33d33c.chunk.js.map